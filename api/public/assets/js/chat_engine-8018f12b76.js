class ChatEngine{constructor(e,s,t){this.chatBox=$(`#${e}`),this.username=s,this.chattype=t,this.socket=io.connect("http://localhost:5000"),this.username&&this.connectionHandler()}connectionHandler(){const e=this;this.socket.on("connect",(function(){console.log("connection established using sockets...!"),e.socket.emit("join_room",{username:e.username,chatroom:e.chattype}),e.socket.on("user_joined",(e=>{console.log("user joined",e)}))})),$("#send-message").click((()=>{let s=$("#chat-message-input").val();console.log(s),""!=s&&e.socket.emit("send_message",{message:s,username:e.username,chatroom:e.chattype})})),e.socket.on("receive_message",(s=>{let t;console.log("message recieved",s.message),t=e.username==s.username?$('<li class="float-right table clear-both bg-yellow-200 rounded-bl-2xl rounded-br-2xl rounded-tr-2xl p-2 mr-4 mt-3">'):$('<li class="float-left table  clear-both bg-green-200 rounded-bl-2xl rounded-br-2xl rounded-tr-2xl p-2 ml-4 mt-3">'),t.append($("<strong>",{html:s.username})),t.append($("<sub>",{html:s.createdAt})),t.append($("<br>")),t.append($("<small>",{html:s.message})),$("#chat-messages-list").append(t)})),e.socket.on("old_messages",(s=>{console.log(e.username),s.forEach((s=>{let t;t=e.username==s.username?$('<li class="float-right table clear-both justify-end bg-yellow-200 rounded-bl-2xl rounded-br-2xl rounded-tr-2xl p-2 mr-4 mt-3">'):$('<li class="float-left table clear-both bg-green-200 rounded-bl-2xl rounded-br-2xl rounded-tr-2xl p-2 ml-4 mt-3">'),t.append($("<strong>",{html:s.username})),t.append($("<sub>",{html:s.createdAt})),t.append($("<br>")),t.append($("<small>",{html:s.message})),$("#chat-messages-list").append(t)}))}))}}