class PostComments{constructor(e){this.postId=e,this.postContainer=$(`#post-${e}`),this.newCommentForm=$(`#post-${e}-comments-form`),this.createComment(e),console.log(e);let t=this;$(".delete-comment-button",this.postContainer).each((function(){t.deleteComment($(this))}))}createComment(e){let t=this;this.newCommentForm.submit((function(n){n.preventDefault();console.log("done"),$.ajax({type:"post",url:"/commentit",data:$(this).serialize(),success:function(n){let s=t.newCommentDom(n.data.comment);if($(`#post-comments-${e}`).append(s),t.deleteComment($(".delete-comment-button",s)),new ToggleLike($(" .toggle-like-button",s)),new Noty({theme:"relax",text:"Comment published!",type:"success",layout:"centerRight",timeout:1500}).show(),n.data.comment.userid.username!=n.data.postuser){let e="/Discuss/#comment-"+n.data.comment._id;notifier.notify(n.data.postuser,"commented on your post",e)}},error:function(e){console.log(e.responseText)}})}))}newCommentDom(e){return $(` <div id="comment-${e._id}">\n       \n       <div class=" items-center justify-center space-x-2 px-20">\n         <div class="block">\n           \x3c!-- Subcomment Sample --\x3e\n           <div class="flex items-center space-x-2 space-y-2"  >\n             <div class="group relative flex flex-shrink-0 self-start cursor-pointer pt-2">\n         <img \n          src="${e.userid.dp}" alt="" class="h-8 w-8 object-fill rounded-full">\n       </div>\n             <div class="flex items-center justify-center space-x-2">\n               <div class="block">\n                 <div class="bg-gray-100 w-auto rounded-xl px-2 pb-2">\n                   <div class="font-medium">\n                     <a href="#" class="hover:underline text-sm">\n                       <small>${e.userid.username}</small>\n                     </a>\n                   </div>\n                   <div class="text-xs">\n                   ${e.commentBody}\n                   </div>\n                 </div>\n                 <div class="flex justify-start items-center text-xs w-full">\n                   <div class="font-semibold text-gray-700 px-2 flex items-center justify-center space-x-1">\n                    \n                     <a class="toggle-like-button hover:underline" data-likes="0" href="/Likehandler/?id=${e._id}&type=comment" >\n                     ${e.likes.length} likes\n                     </a>\n                   \n                                          \n                   <small class="self-center">.</small>\n                     <a  href="/destroycomment/${e._id}" class="delete-comment-button" >\n                       <small>Delete</small>\n                     </a>\n                     \n                  \n                    \n                   </div>\n                 </div>\n               </div>\n              \n             </div>\n           </div>\n        \n         </div>\n       </div>\n       </div>\n     </div>`)}deleteComment(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){console.log(e.data.comment_id),$(`#comment-${e.data.comment_id}`).remove(),console.log("yup"),new Noty({theme:"relax",text:"Comment Deleted",type:"success",layout:"centerRight",timeout:1500}).show()},error:function(e){console.log(e.responseText)}})}))}}